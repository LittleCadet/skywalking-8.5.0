(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-80e2598a"],{"09d2":function(t,e,a){},"20e3":function(t,e,a){"use strict";var s=a("a6ba");a.n(s).a},"45c7":function(t,e,a){"use strict";var s=a("09d2");a.n(s).a},6154:function(t,e,a){},"61d3":function(t,e,a){},"7c97":function(t,e,a){"use strict";var s=a("6154");a.n(s).a},8151:function(t,e,a){"use strict";var s=a("61d3");a.n(s).a},"830b":function(t,e,a){"use strict";var s=a("bd4d");a.n(s).a},9568:function(t,e,a){"use strict";var s=a("9fd2");a.n(s).a},"9fd2":function(t,e,a){},a6ba:function(t,e,a){},bb40:function(t,e,a){"use strict";var s=a("bf48");a.n(s).a},bd4d:function(t,e,a){},bf48:function(t,e,a){},cc10:function(t,e,a){"use strict";a.r(e);var s=a("d225"),i=a("b0b4"),r=a("308d"),n=a("6bb5"),o=a("4e2b"),l=a("9ab4"),c=a("1b40"),d=a("4bb5"),u=a("a0f3"),p=(a("6762"),a("2fdb"),function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(r.a)(this,Object(n.a)(e).apply(this,arguments))).message="",t.locale="en",t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"changeOption",value:function(t,e){[this.updateTaskOpt.MinThreshold,this.updateTaskOpt.EndpointName].includes(e)&&(t={label:e,key:t.target.value}),this.SET_TASK_OPTIONS({item:t,type:e})}},{key:"createTask",value:function(){var t=this;this.CREATE_PROFILE_TASK({startTime:this.time.getTime()}).then(function(e){e.errorReason?t.message=e.errorReason:t.$emit("closeSidebox")})}},{key:"durationRowWatch",value:function(t){this.time=t.start}},{key:"created",value:function(){this.locale=this.$i18n.locale,this.time=this.rocketbotGlobal.durationRow.start}}]),e}(c.d));l.a([Object(c.b)()],p.prototype,"newTaskFields",void 0),l.a([Object(c.b)()],p.prototype,"taskFieldSource",void 0),l.a([Object(d.b)("profileStore/updateTaskOpt")],p.prototype,"updateTaskOpt",void 0),l.a([Object(d.a)("profileStore/CREATE_PROFILE_TASK")],p.prototype,"CREATE_PROFILE_TASK",void 0),l.a([Object(d.c)("profileStore/SET_TASK_OPTIONS")],p.prototype,"SET_TASK_OPTIONS",void 0),l.a([Object(d.d)("rocketbot")],p.prototype,"rocketbotGlobal",void 0),l.a([Object(c.e)("rocketbotGlobal.durationRow")],p.prototype,"durationRowWatch",null);var h=p=l.a([c.a],p),v=(a("20e3"),a("2877")),m=Object(v.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rk-profile-task"},[a("label",[t._v(t._s(t.$t("service")))]),a("RkSelect",{staticClass:"mb-5",attrs:{current:t.newTaskFields.service,data:t.taskFieldSource.serviceSource},on:{onChoose:function(e){return t.changeOption(e,t.updateTaskOpt.Service)}}}),a("label",[t._v(t._s(t.$t("endpointName")))]),a("input",{staticClass:"rk-profile-input",attrs:{type:"text"},on:{change:function(e){return t.changeOption(e,t.updateTaskOpt.EndpointName)}}}),a("div",[a("label",[t._v(t._s(t.$t("monitorTime")))]),a("div",[a("RkRadio",{staticClass:"mb-5 monitor-time-radio",attrs:{current:t.newTaskFields.monitorTime,data:"en"===t.locale?t.taskFieldSource.monitorTimeEn:t.taskFieldSource.monitorTimeCn},on:{onChoose:function(e){return t.changeOption(e,t.updateTaskOpt.MonitorTime)}}}),a("span",[a("RkDate",{staticClass:"sm",attrs:{position:"bottom",format:"YYYY-MM-DD HH:mm:ss"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)]),a("label",[t._v(t._s(t.$t("monitorDuration")))]),a("RkRadio",{staticClass:"mb-5",attrs:{current:t.newTaskFields.monitorDuration,data:t.taskFieldSource.monitorDuration},on:{onChoose:function(e){return t.changeOption(e,t.updateTaskOpt.MonitorDuration)}}}),a("label",[t._v(t._s(t.$t("minThreshold"))+" (ms)")]),a("input",{staticClass:"rk-profile-input",attrs:{type:"text"},domProps:{value:t.newTaskFields.minThreshold},on:{change:function(e){return t.changeOption(e,t.updateTaskOpt.MinThreshold)}}}),a("label",[t._v(t._s(t.$t("dumpPeriod")))]),a("RkRadio",{staticClass:"mb-5",attrs:{current:t.newTaskFields.dumpPeriod,data:t.taskFieldSource.dumpPeriod},on:{onChoose:function(e){return t.changeOption(e,t.updateTaskOpt.DumpPeriod)}}}),a("label",[t._v(t._s(t.$t("maxSamplingCount")))]),a("RkSelect",{staticClass:"mb-5",attrs:{current:t.newTaskFields.maxSamplingCount,data:t.taskFieldSource.maxSamplingCount},on:{onChoose:function(e){return t.changeOption(e,t.updateTaskOpt.MaxSamplingCount)}}}),this.message?a("div",{staticClass:"message-tip"},[t._v(t._s(this.message))]):t._e(),a("div",{on:{click:t.createTask}},[a("a",{staticClass:"rk-create-task-btn bg-blue r"},[a("span",{staticClass:"mr-5 vm"},[t._v(t._s(t.$t("createTask")))])])])],1)},[],!1,null,"296bf710",null).exports,f=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(r.a)(this,Object(n.a)(e).apply(this,arguments))).endpointName="",t.dialogVisible=!1,t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"chooseService",value:function(t){this.SET_HEADER_SOURCE({currentService:t})}},{key:"searchTask",value:function(){this.SET_HEADER_SOURCE({endpointName:this.endpointName}),this.$store.dispatch("profileStore/GET_TASK_LIST")}},{key:"created",value:function(){this.SET_HEADER_SOURCE({endpointName:this.endpointName})}},{key:"showDialogTask",value:function(){this.dialogVisible=!0}},{key:"closeSidebox",value:function(){this.dialogVisible=!1}}]),e}(c.d);l.a([Object(c.b)()],f.prototype,"headerSource",void 0),l.a([Object(c.b)()],f.prototype,"newTaskFields",void 0),l.a([Object(c.b)()],f.prototype,"taskFieldSource",void 0),l.a([Object(d.c)("profileStore/SET_HEADER_SOURCE")],f.prototype,"SET_HEADER_SOURCE",void 0);var b=f=l.a([Object(c.a)({components:{TraceSelect:u.a,ProfileTask:m}})],f),_=(a("830b"),Object(v.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rk-profile-header"},[a("div",[a("a",{staticClass:"rk-new-task-btn r",on:{click:t.showDialogTask}},[a("span",{staticClass:"mr-5 vm"},[t._v(t._s(t.$t("newTask")))])]),a("a",{staticClass:"rk-profile-header-btn bg-blue r mr-10",on:{click:t.searchTask}},[a("svg",{staticClass:"icon mr-5 vm"},[a("use",{attrs:{"xlink:href":"#search"}})]),a("span",{staticClass:"vm"},[t._v(t._s(t.$t("search")))])]),a("div",{staticClass:"flex-h"},[a("TraceSelect",{attrs:{hasSearch:!0,title:t.$t("service"),value:t.headerSource.currentService,data:t.headerSource.serviceSource},on:{input:t.chooseService}}),a("div",{staticClass:"mr-10",staticStyle:{padding:"3px 15px 0"}},[a("div",{staticClass:"sm grey"},[t._v(t._s(t.$t("endpointName")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.endpointName,expression:"endpointName"}],staticClass:"rk-profile-header-input",attrs:{type:"text"},domProps:{value:t.endpointName},on:{input:function(e){e.target.composing||(t.endpointName=e.target.value)}}})])],1),a("rk-sidebox",{staticClass:"profile-task-box",attrs:{width:"600px",title:t.$t("newTask"),show:t.dialogVisible},on:{"update:show":function(e){t.dialogVisible=e}}},[a("ProfileTask",{attrs:{taskFieldSource:t.taskFieldSource,newTaskFields:t.newTaskFields},on:{closeSidebox:t.closeSidebox}})],1)],1)])},[],!1,null,null,null).exports),T=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(r.a)(this,Object(n.a)(e).apply(this,arguments))).selectedKey="",t.selectedTask={},t.viewDetail=!1,t.selectedTaskService={},t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"selectTask",value:function(t){this.selectedTask=t,this.selectedTaskService=this.headerSource.serviceSource.filter(function(e){return e.key===t.serviceId})[0]||{},this.GET_SEGMENT_LIST({taskID:t.id})}},{key:"viewTask",value:function(t){this.viewDetail=!0,this.selectedTask=t}},{key:"selectTrace",value:function(t){this.SET_CURRENT_SEGMENT(t),this.selectedKey=t.segmentId,this.GET_SEGMENT_SPANS({segmentId:t.segmentId})}}]),e}(c.d);l.a([Object(c.b)()],T.prototype,"taskListSource",void 0),l.a([Object(c.b)()],T.prototype,"segmentList",void 0),l.a([Object(c.b)()],T.prototype,"headerSource",void 0),l.a([Object(d.a)("profileStore/GET_SEGMENT_LIST")],T.prototype,"GET_SEGMENT_LIST",void 0),l.a([Object(d.c)("profileStore/SET_CURRENT_SEGMENT")],T.prototype,"SET_CURRENT_SEGMENT",void 0),l.a([Object(d.a)("profileStore/GET_SEGMENT_SPANS")],T.prototype,"GET_SEGMENT_SPANS",void 0);var g=T=l.a([c.a],T),k=(a("bb40"),Object(v.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile-task-list flex-v"},[a("div",{staticClass:"profile-task-wrapper flex-v"},[a("div",{staticClass:"rk-profile-t-tool flex-h"},[t._v("\n      Task List\n    ")]),a("div",{staticClass:"rk-trace-t-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.taskListSource.length,expression:"!taskListSource.length"}],staticClass:"rk-no-data"},[t._v("No Data")]),a("table",{staticClass:"rk-trace-t"},t._l(t.taskListSource,function(e,s){return a("tr",{key:s,staticClass:"rk-trace-tr cp",on:{click:function(a){return t.selectTask(e)}}},[a("td",{staticClass:"rk-trace-td",class:{selected:t.selectedTask.id===e.id}},[a("div",{staticClass:"ell mb-5"},[a("span",{staticClass:"b"},[t._v(t._s(e.endpointName))]),a("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:{content:t.$t("taskView")},expression:"{ content: $t('taskView') }",arg:"bottom"}],staticClass:"profile-btn r",on:{click:function(a){return t.viewTask(e)}}},[a("rk-icon",{attrs:{icon:"library_books"}})],1)]),a("div",{staticClass:"grey ell sm"},[a("span",{staticClass:"mr-10 sm"},[t._v(t._s(t._f("dateformat")(e.startTime)))]),a("span",{staticClass:"mr-10 sm"},[t._v(t._s(t._f("dateformat")(e.startTime+60*e.duration*1e3)))])])])])}),0)]),a("rk-sidebox",{attrs:{width:"50%",show:t.viewDetail,title:t.$t("taskInfo")},on:{"update:show":function(e){t.viewDetail=e}}},[a("div",{staticClass:"rk-trace-detail"},[a("h5",{staticClass:"mb-10"},[t._v(t._s(t.$t("task"))+".")]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("service"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t.selectedTaskService.label))])]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("endpoint"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t.selectedTask.endpointName))])]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("monitorTime"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t._f("dateformat")(t.selectedTask.startTime)))])]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("monitorDuration"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t.selectedTask.duration)+" min")])]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("minThreshold"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t.selectedTask.minDurationThreshold)+" ms")])]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("dumpPeriod"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t.selectedTask.dumpPeriod))])]),a("div",{staticClass:"mb-10 clear"},[a("span",{staticClass:"g-sm-4 grey"},[t._v(t._s(t.$t("maxSamplingCount"))+":")]),a("span",{staticClass:"g-sm-8 wba"},[t._v(t._s(t.selectedTask.maxSamplingCount))])]),t.selectedTask.logs?a("h5",{directives:[{name:"show",rawName:"v-show",value:t.selectedTask.logs.length,expression:"selectedTask.logs.length"}],staticClass:"mb-10"},[t._v(t._s(t.$t("logs"))+".")]):t._e(),t._l(t.selectedTask.logs,function(e,s){return a("div",{key:s,staticClass:"log-item"},[a("div",{staticClass:"mb-10 sm"},[a("span",{staticClass:"mr-10 grey"},[t._v(t._s(t.$t("instance"))+":")]),a("span",[t._v(t._s(e.instanceName))])]),a("div",{staticClass:"mb-10 sm"},[a("span",{staticClass:"mr-10 grey"},[t._v(t._s(t.$t("operationType"))+":")]),a("span",[t._v(t._s(e.operationType))])]),a("div",{staticClass:"mb-10 sm"},[a("span",{staticClass:"mr-10 grey"},[t._v(t._s(t.$t("operationTime"))+":")]),a("span",[t._v(t._s(t._f("dateformat")(e.operationTime)))])])])})],2)])],1),a("div",{staticClass:"profile-trace-wrapper profile-segment flex-v"},[a("div",{staticClass:"rk-profile-t-tool flex-h"},[t._v("\n      Sampled Traces\n    ")]),a("div",{staticClass:"rk-trace-t-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.segmentList.length,expression:"!segmentList.length"}],staticClass:"rk-no-data"},[t._v("No Data")]),a("table",{staticClass:"rk-trace-t"},t._l(t.segmentList,function(e,s){return a("tr",{key:s,staticClass:"rk-trace-tr cp",on:{click:function(a){return t.selectTrace(e)}}},[a("td",{staticClass:"rk-trace-td",class:{selected:t.selectedKey==e.segmentId}},[a("div",{staticClass:"ell mb-5",class:{blue:!e.isError,red:e.isError}},[a("span",{staticClass:"b"},[t._v(t._s(e.endpointNames[0]))])]),a("div",{staticClass:"grey ell sm"},[a("span",{staticClass:"rk-tag mr-10 sm"},[t._v(t._s(e.duration)+" ms")]),t._v(t._s(t._f("dateformat")(parseInt(e.start)))+"\n            ")])])])}),0)])])])},[],!1,null,null,null).exports),C=a("5d73"),S=a.n(C),y=a("3e56"),O=a("f499"),E=a.n(O),w=a("75fc"),j=(a("55dd"),a("d0ab")),x={name:"item",props:["data","highlightTop","thread"],data:function(){return{displayChildren:!0,selectedSpan:0}},methods:{toggle:function(){this.displayChildren=!this.displayChildren}}},N=(a("9568"),Object(v.a)(x,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{class:["profile-item","level"+t.data.parentId],style:{color:t.data.topDur?"#448dfe":"#3d444f"}},[a("div",{class:["thread","level"+t.data.parentId],style:{"text-indent":4*t.data.parentId+"px",width:t.thread+"px"}},[t.data.children&&t.data.children.length?a("svg",{staticClass:"icon vm cp trans",style:t.displayChildren?"":"transform: rotate(-90deg);",on:{click:function(e){return e.stopPropagation(),t.toggle(e)}}},[a("use",{attrs:{"xlink:href":"#arrow-down"}})]):t._e(),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:{content:t.data.codeSignature,popperCls:["trace-table-tooltip"]},expression:"{ content: data.codeSignature, popperCls: ['trace-table-tooltip'] }",arg:"bottom"}]},[t._v("\n        "+t._s(t.data.codeSignature)+"\n      ")])]),a("div",{staticClass:"self"},[t._v(t._s(t.data.duration))]),a("div",{staticClass:"exec-ms"},[t._v(t._s(t.data.durationChildExcluded))]),a("div",{staticClass:"dump-count"},[t._v(t._s(t.data.count))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.data.children&&t.data.children.length&&t.displayChildren,expression:"data.children && data.children.length && displayChildren"}],staticClass:"children-trace"},t._l(t.data.children,function(e,s){return a("item",{key:s,attrs:{thread:t.thread,data:e}})}),1)])},[],!1,null,"585ec522",null).exports),R=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(r.a)(this,Object(n.a)(e).apply(this,arguments))).thread=500,t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"updateHighlightTop",value:function(){this.SET_HIGHLIGHT_TOP()}},{key:"mounted",value:function(){var t=this;this.$refs.dragger.onmousedown=function(e){var a=e.clientX,s=t.thread;document.onmousemove=function(e){var i=e.clientX-a;t.thread=s+i},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}}]),e}(c.d);l.a([Object(d.c)("profileStore/SET_HIGHLIGHT_TOP")],R.prototype,"SET_HIGHLIGHT_TOP",void 0),l.a([Object(c.b)()],R.prototype,"highlightTop",void 0),l.a([Object(c.b)()],R.prototype,"tableData",void 0);var D=R=l.a([Object(c.a)({components:{Item:N}})],R),$=(a("8151"),{components:{ProfileContainer:Object(v.a)(D,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile"},[a("div",{staticClass:"profile-header"},[a("div",{staticClass:"thread",style:"width: "+t.thread+"px"},[a("span",{ref:"dragger",staticClass:"r cp"},[a("svg",{staticClass:"icon"},[a("use",{attrs:{"xlink:href":"#settings_ethernet"}})])]),t._v("\n      Thread Stack\n    ")]),a("div",{staticClass:"self"},[t._v("\n      Duration (ms)\n    ")]),a("div",{staticClass:"exec-ms"},[t._v("\n      Self Duration (ms)\n      "),a("a",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:{content:"Highlight top 10 slow methods",popperCls:["trace-table-tooltip"]},expression:"{ content: 'Highlight top 10 slow methods', popperCls: ['trace-table-tooltip'] }",arg:"bottom"}],staticClass:"profile-set-btn",style:{color:t.highlightTop?"#448dfe":"#484b55"},on:{click:function(e){return t.updateHighlightTop()}}},[t._v("\n        top slow\n      ")])]),a("div",{staticClass:"dump-count"},[t._v("\n      Dump Count\n    ")])]),t._l(t.tableData,function(e,s){return a("Item",{key:"key"+s,attrs:{thread:t.thread,highlightTop:t.highlightTop,data:e}})}),t._t("default")],2)},[],!1,null,"7d7ed5d2",null).exports},props:["data","highlightTop"],watch:{data:function(){this.data.length?this.tableData=this.processTree():this.tableData=[]},highlightTop:function(){this.data.length?this.tableData=this.processTree():this.tableData=[]}},data:function(){return{tableData:[]}},methods:{copy:j.a,processTree:function(){if(!this.data.length)return[];var t=this.data.map(function(t){return t.elements.map(function(t){return t.durationChildExcluded})}).flat(1).sort(function(t,e){return e-t}).filter(function(t,e){return e<10&&0!==t}),e=[],a=!0,s=!1,i=void 0;try{for(var r,n=S()(this.data);!(a=(r=n.next()).done);a=!0){var o=r.value,l=this.sortArr(o.elements,t);e.push.apply(e,Object(w.a)(l))}}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return e},sortArr:function(t,e){var a=JSON.parse(E()(t)),s={},i=[],r=!0,n=!1,o=void 0;try{for(var l,c=S()(a);!(r=(l=c.next()).done);r=!0){var d=l.value;s[d.id]=d}}catch(t){n=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}var u=!0,p=!1,h=void 0;try{for(var v,m=S()(a);!(u=(v=m.next()).done);u=!0){var f=v.value;for(var b in f.topDur=e.includes(f.durationChildExcluded)&&this.highlightTop,"0"===f.parentId&&i.push(f),s)f.id===s[b].parentId&&(f.children?f.children.push(s[b]):f.children=[s[b]])}}catch(t){p=!0,h=t}finally{try{u||null==m.return||m.return()}finally{if(p)throw h}}return i}},mounted:function(){this.tableData=this.processTree()}}),P=(a("7c97"),Object(v.a)($,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"profile-detail-chart-table"},[e("ProfileContainer",{attrs:{highlightTop:this.highlightTop,tableData:this.tableData}},[this.tableData.length?this._e():e("div",{staticClass:"profile-tips"},[this._v(this._s(this.$t("noData")))])])],1)},[],!1,null,null,null).exports),I=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(r.a)(this,Object(n.a)(e).apply(this,arguments))).timeRange=[],t.mode="include",t.message="",t.loading=!1,t}return Object(o.a)(e,t),Object(i.a)(e,[{key:"selectSpan",value:function(t){this.SET_CURRENT_SPAN(t)}},{key:"spanModeChange",value:function(t){this.mode=t.target.value,this.updateTimeRange()}},{key:"updateTimeRange",value:function(){if("include"===this.mode)this.timeRange=[{start:this.currentSpan.startTime,end:this.currentSpan.endTime}];else{var t=this.currentSpan,e=t.children,a=t.startTime,s=t.endTime,i=[];if(!e||!e.length)return void(this.timeRange=[{start:this.currentSpan.startTime,end:this.currentSpan.endTime}]);var r=!0,n=!1,o=void 0;try{for(var l,c=S()(e);!(r=(l=c.next()).done);r=!0){var d=l.value;i.push({start:a,end:d.startTime},{start:d.endTime,end:s})}}catch(t){n=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}i=i.reduce(function(t,e){var a=!1,s=!0,i=!1,r=void 0;try{for(var n,o=S()(t);!(s=(n=o.next()).done);s=!0){var l=n.value;e.start<=l.end&&l.start<=e.start&&(a=!0,l.start=l.start<e.start?e.start:l.start,l.end=l.end<e.end?l.end:e.end)}}catch(t){i=!0,r=t}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return a||t.push(e),t},[]),this.timeRange=i.filter(function(t){return t.start!==t.end})}}},{key:"analyzeProfile",value:function(){var t=this;this.loading=!0,this.updateTimeRange(),this.GET_PROFILE_ANALYZE({segmentId:this.currentSegment.segmentId,timeRanges:this.timeRange}).then(function(e){t.message=e}).catch(function(t){throw t}).finally(function(){t.loading=!1})}}]),e}(c.d);l.a([Object(c.b)()],I.prototype,"segmentSpans",void 0),l.a([Object(c.b)()],I.prototype,"currentSegment",void 0),l.a([Object(c.b)()],I.prototype,"profileAnalyzation",void 0),l.a([Object(c.b)()],I.prototype,"highlightTop",void 0),l.a([Object(c.b)()],I.prototype,"currentSpan",void 0),l.a([Object(d.a)("profileStore/GET_PROFILE_ANALYZE")],I.prototype,"GET_PROFILE_ANALYZE",void 0),l.a([Object(d.c)("profileStore/SET_CURRENT_SPAN")],I.prototype,"SET_CURRENT_SPAN",void 0);var A=I=l.a([Object(c.a)({components:{TraceDetailChartTable:y.a,ProfileDetailChartTable:P}})],I),L=(a("d2d9"),Object(v.a)(A,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile-trace-dashboard flex-v"},[a("div",{staticClass:"profile-trace-detail-wrapper mb-5 blue sm"},[a("select",{staticClass:"profile-trace-detail-ids"},t._l(t.currentSegment.traceIds,function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}),0),a("select",{staticClass:"profile-trace-detail-ids",on:{change:function(e){return t.spanModeChange(e)}}},[a("option",{key:"include",attrs:{value:"include"}},[t._v(t._s(t.$t("includeChildren")))]),a("option",{key:"exclude",attrs:{value:"exclude"}},[t._v(t._s(t.$t("excludeChildren")))])]),a("a",{staticClass:"profile-analyze-btn bg-blue profile-trace-detail-ids",on:{click:function(e){return t.analyzeProfile()}}},[a("span",{staticClass:"vm"},[t._v(t._s(t.$t("analyze")))])])]),a("TraceDetailChartTable",{attrs:{data:t.segmentSpans,traceId:t.currentSegment.traceIds[0],showBtnDetail:!0,HeaderType:"profile"},on:{selectSpan:t.selectSpan}}),a("div",[t.loading?t._e():a("ProfileDetailChartTable",{attrs:{data:t.profileAnalyzation,highlightTop:t.highlightTop}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"rk-trace-t-loading"},[a("svg",{staticClass:"icon loading"},[a("use",{attrs:{"xlink:href":"#spinner"}})])]),t.message?a("div",[t._v(t._s(t.message))]):t._e()],1)],1)},[],!1,null,"51c29404",null).exports),F=function(t){function e(){return Object(s.a)(this,e),Object(r.a)(this,Object(n.a)(e).apply(this,arguments))}return Object(o.a)(e,t),Object(i.a)(e,[{key:"beforeMount",value:function(){this.$store.dispatch("profileStore/GET_SERVICES",{duration:this.durationTime})}}]),e}(c.d);l.a([Object(d.d)("profileStore")],F.prototype,"profile",void 0),l.a([Object(d.b)("durationTime")],F.prototype,"durationTime",void 0);var G=F=l.a([Object(c.a)({components:{ProfileHeader:_,ProfileTaskList:k,ProfileTraceDetail:L}})],F),H=(a("45c7"),Object(v.a)(G,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rk-profile flex-v"},[a("ProfileHeader",{attrs:{headerSource:t.profile.headerSource,newTaskFields:t.profile.newTaskFields,taskFieldSource:t.profile.taskFieldSource}}),a("div",{staticClass:"rk-profile-context"},[a("ProfileTaskList",{attrs:{headerSource:t.profile.headerSource,taskListSource:t.profile.taskListSource,segmentList:t.profile.segmentList}}),a("ProfileTraceDetail",{attrs:{currentSegment:t.profile.currentSegment,segmentSpans:t.profile.segmentSpans,profileAnalyzation:t.profile.profileAnalyzation,highlightTop:t.profile.highlightTop,currentSpan:t.profile.currentSpan}})],1)],1)},[],!1,null,null,null));e.default=H.exports},d268:function(t,e,a){},d2d9:function(t,e,a){"use strict";var s=a("d268");a.n(s).a}}]);